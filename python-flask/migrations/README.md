# DBマイグレーション
Alembicライブラリを使用。
app.pyの実行ごとに、SQLAlchemyのモデルの差分を検出する。
差分がある場合、マイグレーション用のコードがmigrations/versionsに自動生成される。
開発環境のみの使用。
本番環境では管理者が手動で実行する。

# マイグレーションの手順
1. database_setting.pyでDBの情報を変更する
2. コードの変更を自動検知してapp.pyが再起動する(debug=Falseのときは手動で再起動)
3. migrations/versionsにマイグレーションコードが自動生成され、自動でマイグレーションが行われる

# 注意点
マイグレーションコードはgitignoreされているのでgithubには上がらない。
Alembicが検出するのは、情報の追加・削除だけ。カラム名やテーブル名の変更はカラム・テーブルを一旦削除して生成するという順序になり、データは消えてしまうので注意。
カラム名やテーブル名を変更したいときはAlembic.Operationsを使って手動で編集する必要がある。


